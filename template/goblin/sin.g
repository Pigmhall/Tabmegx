case :
 sy=sy+wv[th[i]];++th[i];if(th[i]==WVM){th[i]=0;}
 tr[i]=wrapvalue(tr[i]+trs[i]);
 break;
